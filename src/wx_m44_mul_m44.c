/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   wx_m44_mul_m44.c                                   :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: ***REMOVED*** <***REMOVED***@student.hive.fi>        +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2021/03/03 16:49:05 by ***REMOVED***          #+#    #+#             */
/*   Updated: 2021/03/24 15:49:25 by ***REMOVED***         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "wx_math.h"

static void	zz_multiply(t_f32 *m, t_f32 const *l, t_f32 const *r)
{
	m[0] = l[0] * r[0] + l[4] * r[1] + l[8] * r[2] + l[12] * r[3];
	m[1] = l[1] * r[0] + l[5] * r[1] + l[9] * r[2] + l[13] * r[3];
	m[2] = l[2] * r[0] + l[6] * r[1] + l[10] * r[2] + l[14] * r[3];
	m[3] = l[3] * r[0] + l[7] * r[1] + l[11] * r[2] + l[15] * r[3];
	m[4] = l[0] * r[4] + l[4] * r[5] + l[8] * r[6] + l[12] * r[7];
	m[5] = l[1] * r[4] + l[5] * r[5] + l[9] * r[6] + l[13] * r[7];
	m[6] = l[2] * r[4] + l[6] * r[5] + l[10] * r[6] + l[14] * r[7];
	m[7] = l[3] * r[4] + l[7] * r[5] + l[11] * r[6] + l[15] * r[7];
	m[8] = l[0] * r[8] + l[4] * r[9] + l[8] * r[10] + l[12] * r[11];
	m[9] = l[1] * r[8] + l[5] * r[9] + l[9] * r[10] + l[13] * r[11];
	m[10] = l[2] * r[8] + l[6] * r[9] + l[10] * r[10] + l[14] * r[11];
	m[11] = l[3] * r[8] + l[7] * r[9] + l[11] * r[10] + l[15] * r[11];
	m[12] = l[0] * r[12] + l[4] * r[13] + l[8] * r[14] + l[12] * r[15];
	m[13] = l[1] * r[12] + l[5] * r[13] + l[9] * r[14] + l[13] * r[15];
	m[14] = l[2] * r[12] + l[6] * r[13] + l[10] * r[14] + l[14] * r[15];
	m[15] = l[3] * r[12] + l[7] * r[13] + l[11] * r[14] + l[15] * r[15];
}

t_m44	wx_m44_mul_m44(t_m44 const *l, t_m44 const *r)
{
	t_m44	m;

	zz_multiply(m.xs, l->xs, r->xs);
	return (m);
}
